# .env.example - Configuration template for UTXOracle
# Copy to .env and customize for your environment

# Mempool.space Backend
MEMPOOL_API_URL=http://localhost:8999
MEMPOOL_WS_URL=ws://localhost:8999

# Bitcoin Core
BITCOIN_RPC_URL=http://127.0.0.1:8332
BITCOIN_RPC_USER=your_user
BITCOIN_RPC_PASSWORD=your_password
BITCOIN_DATADIR=/home/user/.bitcoin

# Database
DUCKDB_PATH=/media/sam/2TB-NVMe/prod/apps/utxoracle/data/utxoracle_cache.db
DUCKDB_BACKUP_PATH=/tmp/utxoracle_backup.duckdb

# API Server
FASTAPI_HOST=0.0.0.0
FASTAPI_PORT=8000
FASTAPI_WORKERS=4

# UTXOracle Algorithm
UTXORACLE_CONFIDENCE_THRESHOLD=0.3
UTXORACLE_MIN_PRICE_USD=10000
UTXORACLE_MAX_PRICE_USD=500000

# Scheduling
ANALYSIS_INTERVAL_MINUTES=10

# Logging
LOG_LEVEL=INFO
LOG_FILE=/var/log/utxoracle/analysis.log
LOG_RETENTION_DAYS=30

# =============================================================================
# Webhook Alert System (spec-011)
# =============================================================================

# Main webhook configuration
ALERT_WEBHOOK_URL=http://localhost:5678/webhook/utxoracle-alerts
ALERT_WEBHOOK_SECRET=your-optional-hmac-secret
ALERT_ENABLED=true
ALERT_MIN_SEVERITY=medium

# Per-event-type toggles
ALERT_WHALE_ENABLED=true
ALERT_SIGNAL_ENABLED=true
ALERT_REGIME_ENABLED=true
ALERT_PRICE_ENABLED=true

# Thresholds
ALERT_WHALE_MIN_BTC=100
ALERT_SIGNAL_MIN_CONFIDENCE=0.7
ALERT_PRICE_MIN_DIVERGENCE=3.0

# =============================================================================
# Wasserstein Distance (spec-010)
# =============================================================================

# Rolling window configuration
WASSERSTEIN_WINDOW_SIZE=144          # Window size in blocks (144 = 24h)
WASSERSTEIN_STEP_SIZE=6              # Step size in blocks (6 = 1h)
WASSERSTEIN_MIN_SAMPLES=50           # Minimum samples per window

# Thresholds
WASSERSTEIN_SHIFT_THRESHOLD=0.10     # Normalized distance for significant shift
WASSERSTEIN_SUSTAINED_COUNT=3        # Consecutive shifts for regime change

# Toggle
WASSERSTEIN_ENABLED=true             # Enable/disable Wasserstein calculation

# =============================================================================
# UTXO Lifecycle Engine (spec-017)
# =============================================================================

# Storage configuration
UTXO_LIFECYCLE_ENABLED=true
UTXO_LIFECYCLE_DB_PATH=data/utxo_lifecycle.duckdb
UTXO_RETENTION_DAYS=180              # 6-month retention for MVP
UTXO_PRUNING_ENABLED=true            # Auto-prune old spent UTXOs

# Age classification
UTXO_STH_THRESHOLD_DAYS=155          # Short-term holder threshold

# Processing
UTXO_BATCH_SIZE=10000                # UTXOs per batch for processing
UTXO_SNAPSHOT_INTERVAL=144           # Create snapshot every N blocks (144 = daily)

# =============================================================================
# Cointime Economics (spec-018)
# =============================================================================

# Feature toggle
COINTIME_ENABLED=true                # Enable/disable Cointime calculation

# Fusion weight (9th component)
COINTIME_WEIGHT=0.12                 # Weight in enhanced fusion

# AVIV thresholds for valuation zones
COINTIME_AVIV_UNDERVALUED=1.0        # AVIV below this = undervalued
COINTIME_AVIV_OVERVALUED=2.5         # AVIV above this = overvalued

# Extreme dormancy threshold
COINTIME_EXTREME_DORMANCY=0.15       # Liveliness below this = extreme dormancy

# =============================================================================
# ResearchBitcoin.net API Integration (spec-035)
# =============================================================================

# API Authentication - Get token from https://api.researchbitcoin.net/token
RBN_API_TOKEN=xxxxxxxx-xxxx-xxxx-xxxx-xxxxxxxxxxxx

# Tier: 0=free (100/week), 1=standard (300/week), 2=premium (10k/week)
RBN_TIER=0

# Cache configuration
RBN_CACHE_TTL_HOURS=24               # Cache time-to-live in hours
RBN_TIMEOUT_SECONDS=30               # HTTP request timeout
